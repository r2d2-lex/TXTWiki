 Xubuntu 12.04. Ligtdm и список пользователей при входе.
Все-таки приходится внедрять xubuntu 12.04 на предприятии, несмотря на мое нежелание.
Просто неожиданно много оказалось старых компов, на которых любимая opensuse даже с XFCE работать категорически не желает.
Сегодня разобрался с одной проблемкой. В отличии от "сюзи", в "ксубунте" по умолчанию не отображается список пользователей ldap на экране входа. Раньше уже сталкивался с подобными проблемами (то список не отображается, то отображается ВЕСЬ), но обычно все решалось само собой, то ли обновлением, то ли парой перезагрузок. Однако на этот раз пришлось попотеть. Сначала я не придал значения такой мелочи, тем более сходу проблему решить не удалось. Несколько человек просто дополнительно набирают логин перед паролем и все хорошо. Однако сегодня вместо обычного разворачивания из образ решил настроить систему с нуля. Неожиданно заметил, что последний залогиненный пользователь сохранился в списке доступных! Начал вспоминать. Раньше я сначала настраивал систему, потом обновлял, а сегодня наоборот. И, что гораздо значительнее, при произведенном входе пользователя обновлял настройки соединения с сервером ldap:

root# /etc/init.d/nscd restart
root# pam-auth-update
root# auth-client-config -t nss -p lac_ldap

После этого пользователь навсегда оставался на экране входа.
Но, как говорится, дурная голова ногам покоя не дает. Как теперь удалить лишних пользователей? Курение гугла подсказывает пару вариантов. Во-первых, файл /etc/lightdm/users.conf  в котором можно указать, каких пользователей скрывать. Эксперимент показал, что для ldap это не работает. Во-вторых, очистка содержимого /var/cache/lightdm , где хранится кэщ логинившихся пользователей.Также не работает. Опция greeter-hide-users в файле /etc/lightdm/lightdm.conf отключает список полностью.


/var/cache/lightdm
/var/cache/lightdm
/var/cache/lightdm
/var/cache/lightdm
/var/cache/lightdm
